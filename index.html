<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monopoly Bank & Properties</title>
</head>
<body style="background-color: #f0f0f0; padding: 20px; font-family: Arial, sans-serif; margin: 0;">
    <div style="max-width: 1200px; margin: 0 auto; background-color: white; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1);">
        <h1 style="color: #1a5f7a; text-align: center; margin-bottom: 20px;">Monopoly Bank & Properties</h1>
        
        <div style="display: flex; gap: 10px; margin-bottom: 20px;">
            <input type="text" id="newPlayerName" placeholder="Enter player name" style="padding: 8px; border: 1px solid #ccc; border-radius: 5px; flex-grow: 1;">
            <button onclick="addPlayer()" style="background-color: #1a5f7a; color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer;">Add Player</button>
        </div>

        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px; margin-bottom: 20px;">
            <button onclick="collectSalary()" style="background-color: #1a5f7a; color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer;">Collect GO Salary</button>
            <button onclick="payBank()" style="background-color: #1a5f7a; color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer;">Pay Bank</button>
            <button onclick="payAllPlayers()" style="background-color: #1a5f7a; color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer;">Pay All Players</button>
            <button onclick="showPropertyModal()" style="background-color: #1a5f7a; color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer;">Buy Property</button>
        </div>

        <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 20px;">
            <div style="border-right: 2px solid #eee; padding-right: 20px;">
                <h2 style="color: #1a5f7a; text-align: center; margin-bottom: 20px;">Players</h2>
                <div id="playersContainer" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                    <!-- Players will be added here dynamically -->
                </div>
            </div>

            <div style="padding-left: 20px;">
                <h2 style="color: #1a5f7a; text-align: center; margin-bottom: 20px;">Properties</h2>
                <div id="propertiesContainer">
                    <!-- Property groups will be added here -->
                </div>
            </div>
        </div>
    </div>

    <div id="transactionModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); justify-content: center; align-items: center;">
        <div style="background-color: white; padding: 20px; border-radius: 8px; min-width: 300px;">
            <h2 id="modalTitle" style="color: #1a5f7a; margin-bottom: 15px;">Transaction</h2>
            <input type="number" id="transactionAmount" placeholder="Enter amount" style="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 5px; margin: 10px 0;">
            <div style="display: flex; justify-content: flex-end; gap: 10px; margin-top: 15px;">
                <button onclick="cancelTransaction()" style="background-color: #1a5f7a; color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer;">Cancel</button>
                <button onclick="confirmTransaction()" style="background-color: #1a5f7a; color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer;">Confirm</button>
            </div>
        </div>
    </div>

    <div id="propertyModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); justify-content: center; align-items: center;">
        <div style="background-color: white; padding: 20px; border-radius: 8px; min-width: 300px;">
            <h2 style="color: #1a5f7a; margin-bottom: 15px;">Buy Property</h2>
            <select id="propertySelect" style="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 5px; margin: 10px 0;">
                <!-- Properties will be added here -->
            </select>
            <select id="playerSelect" style="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 5px; margin: 10px 0;">
                <!-- Players will be added here -->
            </select>
            <div style="display: flex; justify-content: flex-end; gap: 10px; margin-top: 15px;">
                <button onclick="cancelPropertyPurchase()" style="background-color: #1a5f7a; color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer;">Cancel</button>
                <button onclick="confirmPropertyPurchase()" style="background-color: #1a5f7a; color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer;">Buy Property</button>
            </div>
        </div>
    </div>

    <script>
        class Player {
            constructor(name) {
                this.name = name;
                this.balance = 1500;
                this.id = Date.now().toString();
                this.properties = [];
            }
        }

        class Property {
            constructor(name, price, group, rent, color) {
                this.name = name;
                this.price = price;
                this.group = group;
                this.rent = rent;
                this.color = color;
                this.owner = null;
            }
        }

        let players = [];
        let properties = [];
        let currentTransaction = null;

        function initializeProperties() {
            properties.push(new Property("Mediterranean Avenue", 60, "Brown", 2, "#955436"));
            properties.push(new Property("Baltic Avenue", 60, "Brown", 4, "#955436"));
            properties.push(new Property("Oriental Avenue", 100, "Light Blue", 6, "#aae0fa"));
            properties.push(new Property("Vermont Avenue", 100, "Light Blue", 6, "#aae0fa"));
            properties.push(new Property("Connecticut Avenue", 120, "Light Blue", 8, "#aae0fa"));
            // Add more properties as needed...
        }

        function addPlayer() {
            const nameInput = document.getElementById('newPlayerName');
            const name = nameInput.value.trim();
            
            if (name) {
                const player = new Player(name);
                players.push(player);
                nameInput.value = '';
                updatePlayersDisplay();
                updatePropertyDisplay();
            }
        }

        function updatePlayersDisplay() {
            const container = document.getElementById('playersContainer');
            container.innerHTML = '';

            players.forEach(player => {
                const playerCard = document.createElement('div');
                playerCard.style.cssText = 'background-color: #fff; border: 2px solid #1a5f7a; border-radius: 8px; padding: 15px;';
                
                let propertiesHtml = `<div style="margin-top: 10px; padding: 10px; background-color: #f8f9fa; border-radius: 5px;">
                    <h3>Properties:</h3><ul style="list-style: none; padding: 0;">`;
                
                player.properties.forEach(prop => {
                    propertiesHtml += `
                        <li style="padding: 8px; margin: 5px 0; background-color: #fff; border: 1px solid #ddd; border-radius: 4px; display: flex; justify-content: space-between; align-items: center;">
                            <span>
                                <span style="width: 20px; height: 20px; border-radius: 50%; display: inline-block; margin-right: 10px; background-color: ${prop.color};"></span>
                                ${prop.name}
                            </span>
                            <button onclick="sellProperty('${player.id}', '${prop.name}')" style="background-color: #1a5f7a; color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer;">Sell</button>
                        </li>
                    `;
                });
                propertiesHtml += '</ul></div>';

                playerCard.innerHTML = `
                    <div style="font-size: 1.2em; font-weight: bold; color: #1a5f7a; margin-bottom: 10px;">${player.name}</div>
                    <div style="font-size: 1.5em; color: #2ecc71; margin-bottom: 15px;">$${player.balance}</div>
                    <div style="display: flex; flex-direction: column; gap: 10px;">
                        <button onclick="showTransactionModal('receive', '${player.id}')" style="background-color: #1a5f7a; color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer;">Receive Money</button>
                        <button onclick="showTransactionModal('pay', '${player.id}')" style="background-color: #1a5f7a; color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer;">Pay Money</button>
                        <button onclick="removePlayer('${player.id}')" style="background-color: #1a5f7a; color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer;">Remove Player</button>
                    </div>
                    ${propertiesHtml}
                `;
                container.appendChild(playerCard);
            });
        }

        function updatePropertyDisplay() {
            const container = document.getElementById('propertiesContainer');
            container.innerHTML = '';

            const groupedProperties = properties.reduce((acc, prop) => {
                if (!acc[prop.group]) {
                    acc[prop.group] = [];
                }
                acc[prop.group].push(prop);
                return acc;
            }, {});

            Object.entries(groupedProperties).forEach(([group, props]) => {
                const groupDiv = document.createElement('div');
                groupDiv.style.marginBottom = '20px';
                
                let groupHtml = `<div style="font-weight: bold; color: #1a5f7a; margin-bottom: 10px;">${group}</div>`;
                props.forEach(prop => {
                    groupHtml += `
                        <div style="background-color: white; border: 1px solid #ddd; border-radius: 8px; padding: 15px; margin-bottom: 10px;">
                            <span style="width: 20px; height: 20px; border-radius: 50%; display: inline-block; margin-right: 10px; background-color: ${prop.color};"></span>
                            <strong>${prop.name}</strong><br>
                            Price: $${prop.price}<br>
                            Rent: $${prop.rent}<br>
                            Owner: ${prop.owner ? prop.owner : 'Bank'}
                        </div>
                    `;
                });

                groupDiv.innerHTML = groupHtml;
                container.appendChild(groupDiv);
            });
        }

        // Initialize the game when the page loads
        document.addEventListener('DOMContentLoaded', () => {
            initializeProperties();
            updatePropertyDisplay();
        });

        // Add remaining functions (showPropertyModal, transactions, etc.) here...
        function showPropertyModal() {
            const modal = document.getElementById('propertyModal');
            modal.style.display = 'flex';
            // Populate selects...
        }

        function cancelPropertyPurchase() {
            const modal = document.getElementById('propertyModal');
            modal.style.display = 'none';
        }

        function confirmPropertyPurchase() {
            // Handle property purchase...
        }

        function showTransactionModal(type, playerId) {
            const modal = document.getElementById('transactionModal');
            modal.style.display = 'flex';
            currentTransaction = { type, playerId };
        }

        function cancelTransaction() {
            const modal = document.getElementById('transactionModal');
            modal.style.display = 'none';
        }

        function confirmTransaction() {
            // Handle transaction...
        }
        // Add these functions to the existing JavaScript code

function confirmPropertyPurchase() {
    const propertyName = document.getElementById('propertySelect').value;
    const playerId = document.getElementById('playerSelect').value;
    const property = properties.find(p => p.name === propertyName);
    const player = players.find(p => p.id === playerId);

    if (!property || !player) {
        alert('Please select a valid property and player');
        return;
    }

    // Check if player has enough money
    if (player.balance < property.price) {
        alert('Insufficient funds to purchase this property!');
        return;
    }

    // Process the purchase
    player.balance -= property.price;
    property.owner = player.name;
    player.properties.push(property);

    // Update displays
    updatePlayersDisplay();
    updatePropertyDisplay();
    cancelPropertyPurchase();
}

function sellProperty(playerId, propertyName) {
    const player = players.find(p => p.id === playerId);
    const property = properties.find(p => p.name === propertyName);

    if (!player || !property) {
        alert('Invalid player or property');
        return;
    }

    // Calculate sell price (half of original price)
    const sellPrice = Math.floor(property.price / 2);

    // Process the sale
    player.balance += sellPrice;
    property.owner = null;
    player.properties = player.properties.filter(p => p.name !== propertyName);

    // Update displays
    updatePlayersDisplay();
    updatePropertyDisplay();
}

// Enhanced property modal display
function showPropertyModal() {
    const modal = document.getElementById('propertyModal');
    const propertySelect = document.getElementById('propertySelect');
    const playerSelect = document.getElementById('playerSelect');

    // Clear previous options
    propertySelect.innerHTML = '';
    playerSelect.innerHTML = '';

    // Add available properties
    const availableProperties = properties.filter(p => !p.owner);
    if (availableProperties.length === 0) {
        alert('No properties available for purchase!');
        return;
    }

    availableProperties.forEach(prop => {
        const option = document.createElement('option');
        option.value = prop.name;
        option.textContent = `${prop.name} - $${prop.price}`;
        propertySelect.appendChild(option);
    });

    // Add players
    if (players.length === 0) {
        alert('Add players before buying properties!');
        return;
    }

    players.forEach(player => {
        const option = document.createElement('option');
        option.value = player.id;
        option.textContent = `${player.name} - $${player.balance}`;
        playerSelect.appendChild(option);
    });

    modal.style.display = 'flex';
}

// Enhanced initialize properties function with complete property list
function initializeProperties() {
    // Brown properties
    properties.push(new Property("Padra", 60, "Brown", 2, "#955436"));
    properties.push(new Property("Muktanand", 60, "Brown", 4, "#955436"));

    // Light Blue properties
    properties.push(new Property("Oriental Avenue", 100, "Light Blue", 6, "#aae0fa"));
    properties.push(new Property("Vermont Avenue", 100, "Light Blue", 6, "#aae0fa"));
    properties.push(new Property("Connecticut Avenue", 120, "Light Blue", 8, "#aae0fa"));

    // Pink properties
    properties.push(new Property("St. Charles Place", 140, "Pink", 10, "#d93a96"));
    properties.push(new Property("States Avenue", 140, "Pink", 10, "#d93a96"));
    properties.push(new Property("Virginia Avenue", 160, "Pink", 12, "#d93a96"));

    // Orange properties
    properties.push(new Property("St. James Place", 180, "Orange", 14, "#f7921c"));
    properties.push(new Property("Tennessee Avenue", 180, "Orange", 14, "#f7921c"));
    properties.push(new Property("New York Avenue", 200, "Orange", 16, "#f7921c"));

    // Red properties
    properties.push(new Property("Kentucky Avenue", 220, "Red", 18, "#ed1b24"));
    properties.push(new Property("Indiana Avenue", 220, "Red", 18, "#ed1b24"));
    properties.push(new Property("Illinois Avenue", 240, "Red", 20, "#ed1b24"));

    // Yellow properties
    properties.push(new Property("Atlantic Avenue", 260, "Yellow", 22, "#fef200"));
    properties.push(new Property("Ventnor Avenue", 260, "Yellow", 22, "#fef200"));
    properties.push(new Property("Marvin Gardens", 280, "Yellow", 24, "#fef200"));

    // Green properties
    properties.push(new Property("Pacific Avenue", 300, "Green", 26, "#1fb25a"));
    properties.push(new Property("North Carolina Avenue", 300, "Green", 26, "#1fb25a"));
    properties.push(new Property("Pennsylvania Avenue", 320, "Green", 28, "#1fb25a"));

    // Dark Blue properties
    properties.push(new Property("Park Place", 350, "Dark Blue", 35, "#0072bb"));
    properties.push(new Property("Boardwalk", 400, "Dark Blue", 50, "#0072bb"));

    // Railroads
    properties.push(new Property("Reading Railroad", 200, "Railroad", 25, "#000000"));
    properties.push(new Property("Pennsylvania Railroad", 200, "Railroad", 25, "#000000"));
    properties.push(new Property("B. & O. Railroad", 200, "Railroad", 25, "#000000"));
    properties.push(new Property("Short Line", 200, "Railroad", 25, "#000000"));

    // Utilities
    properties.push(new Property("Electric Company", 150, "Utility", 0, "#999999"));
    properties.push(new Property("Water Works", 150, "Utility", 0, "#999999"));
}

// Add transaction confirmation functions
function confirmTransaction() {
    const amount = parseInt(document.getElementById('transactionAmount').value);
    if (!amount || isNaN(amount)) {
        alert('Please enter a valid amount');
        return;
    }

    const player = players.find(p => p.id === currentTransaction.playerId);
    if (!player) {
        alert('Invalid player');
        return;
    }

    if (currentTransaction.type === 'receive') {
        player.balance += amount;
    } else {
        if (player.balance < amount) {
            alert('Insufficient funds!');
            return;
        }
        player.balance -= amount;
    }

    updatePlayersDisplay();
    cancelTransaction();
}

// Add function to collect salary
function collectSalary() {
    players.forEach(player => {
        player.balance += 200;
    });
    updatePlayersDisplay();
    alert('Each player collected $200 for passing GO!');
}

// Add function to pay all players
function payAllPlayers() {
    const amount = parseInt(prompt('Enter amount to pay to each player:'));
    if (!amount || isNaN(amount)) return;

    const playerName = prompt('Enter paying player name:');
    const payingPlayer = players.find(p => p.name.toLowerCase() === playerName.toLowerCase());
    
    if (payingPlayer) {
        const totalAmount = amount * (players.length - 1);
        if (payingPlayer.balance >= totalAmount) {
            players.forEach(player => {
                if (player !== payingPlayer) {
                    player.balance += amount;
                }
            });
            payingPlayer.balance -= totalAmount;
            updatePlayersDisplay();
            alert(`${payingPlayer.name} paid $${amount} to each player`);
        } else {
            alert('Insufficient funds!');
        }
    } else {
        alert('Player not found!');
    }
}
    </script>
</body>
</html>
